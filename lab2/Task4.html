<!-- CSE 5542 Lab2 Task4: Stock data - D3 line chart -->
<!-- Jiaxin Yang.5039@osu.edu -->

<!DOCTYPE html>
<html>
  <head>
    <title>Lab_2 Task_4</title>
    <!-- <script type="text/javascript" src="d3/d3.min.js"></script>  -->
    <script src="https://d3js.org/d3.v4.min.js"></script>
  </head>

  <body>
    <svg width="1000" height="1000"></svg>

    <script type="text/javascript">
      // Read the data
      d3.csv("stock_avg.csv", lineGraph);

      function lineGraph(error, data) {
        const format = d3.timeFormat("%m/%d/%Y");
        const newDate = format(data.Date);
        console.log(newDate);
        var x = d3
          .scaleLinear()
          .domain(
            d3.extent(data, function (d) {
              return d.Date;
            })
          )
          .range([100, 800]);
        d3.select("svg")
          .append("g")
          .attr("transform", "translate(0,550)")
          .call(d3.axisBottom(x).ticks(15));

        var y = d3.scaleLinear().domain([80, 350]).rangeRound([500, 0]);
        d3.select("svg")
          .append("g")
          .attr("transform", "translate(100,50)")
          .call(d3.axisLeft(y))
          .append("text")
          .attr("fill", "black")
          .style("font-size", "13px")
          .attr("dy", -8)
          .attr("text-anchor", "end")
          .text("Price ($)");

        // Add the line
        d3.select("svg")
          .append("path")
          .datum(data)
          .attr("fill", "none")
          .attr("stroke", "steelblue")
          .attr("stroke-width", 2)
          .attr(
            "d",
            d3
              .line()
              .x(function (d) {
                return x(d.date);
              })
              .y(function (d) {
                return y(d.price);
              })
          )
          .attr("transform", "translate(90,100)");
      }
    </script>
  </body>
</html>
